- scenario:
    name: Expressions
    tests:
      - scenario:
          name: Literal Boolean
          tests:
            - name: "true"
              input: |
                const x = true;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralBool: 'True'
                  s:
                    EmptyStatement: {}
            - name: "false"
              input: |
                const x = false;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralBool: 'False'
                  s:
                    EmptyStatement: {}
      - scenario:
          name: Literal Int
          tests:
            - name: "positive int in range: 123"
              input: |
                const x = 123;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralInt: '123'
                  s:
                    EmptyStatement: {}
            - name: "positive maximum int in range: 2147483647"
              input: |
                const x = 2147483647;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralInt: '2147483647'
                  s:
                    EmptyStatement: {}
            - name: "positive maximum int just outside range: 2147483648"
              input: |
                const x = 2147483648;
              output:
                - LiteralIntOverflowError:
                    text: '2147483648'
                    location: 10:1:11-19:1:20
            - name: "negative int in range: -123"
              input: |
                const x = -123;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralInt: '-123'
                  s:
                    EmptyStatement: {}
            - name: "negative maximum int just inside range: -2147483648"
              input: |
                const x = -2147483648;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralInt: '-2147483648'
                  s:
                    EmptyStatement: {}
            - name: "negative maximum int just outside range: -2147483649"
              input: |
                const x = -2147483649;
              output:
                - LiteralIntOverflowError:
                    location: 10:1:11-20:1:21
                    text: '-2147483649'
      - scenario:
          name: Literal Float
          tests:
            - name: "positive float in range: 1.2"
              input: |
                const x = 1.2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '1.2'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range with positive E: 1.2E2"
              input: |
                const x = 1.2E2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '120.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range with positive E: 1.2E+2"
              input: |
                const x = 1.2E+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '120.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range with positive e: 1.2e2"
              input: |
                const x = 1.2e2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '120.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range with positive e: 1.2e+2"
              input: |
                const x = 1.2e+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '120.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range starting with . and positive E: .2E2"
              input: |
                const x = .2E2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '20.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range starting with . and positive E: .2E+2"
              input: |
                const x = .2E+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '20.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range starting with . and positive e: .2e2"
              input: |
                const x = .2e2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '20.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range starting with . and positive e: .2e+2"
              input: |
                const x = .2e+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '20.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range without . and positive E: 2E2"
              input: |
                const x = 2E2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '200.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range without . and positive E: 2E+2"
              input: |
                const x = 2E+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '200.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range without . and positive e: 2e2"
              input: |
                const x = 2e2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '200.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range without . and positive e: 2e+2"
              input: |
                const x = 2e+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '200.0'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range with negative E: 1.2E-2"
              input: |
                const x = 1.2E-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '0.012'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range with negative E: 1.2e-2"
              input: |
                const x = 1.2e-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '0.012'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range starting with . and negative E: .2E-2"
              input: |
                const x = .2E-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '0.002'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range starting with . and negative E: .2e-2"
              input: |
                const x = .2e-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '0.002'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range without . and negative E: 2E-2"
              input: |
                const x = 2E-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '0.02'
                  s:
                    EmptyStatement: {}
            - name: "positive float in range without . and negative e: 2e-2"
              input: |
                const x = 2e-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '0.02'
                  s:
                    EmptyStatement: {}
            - name: "positive float outside range: 1.0e100"
              input: |
                const x = 1.0e100;
              output:
                - LiteralFloatOverflowError:
                    text: '1.0e100'
                    location: 10:1:11-16:1:17
            - name: "negative float in range: -1.2"
              input: |
                const x = -1.2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-1.2'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range with positive E: -1.2E2"
              input: |
                const x = -1.2E2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-120.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range with positive E: -1.2E+2"
              input: |
                const x = -1.2E+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-120.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range with positive e: -1.2e2"
              input: |
                const x = -1.2e2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-120.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range with positive e: -1.2e+2"
              input: |
                const x = -1.2e+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-120.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range starting with . and positive E: -.2E2"
              input: |
                const x = -.2E2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-20.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range starting with . and positive E: -.2E+2"
              input: |
                const x = -.2E+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-20.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range starting with . and positive e: -.2e2"
              input: |
                const x = -.2e2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-20.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range starting with . and positive e: -.2e+2"
              input: |
                const x = -.2e+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-20.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range without . and positive E: -2E2"
              input: |
                const x = -2E2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-200.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range without . and positive E: -2E+2"
              input: |
                const x = -2E+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-200.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range without . and positive e: -2e2"
              input: |
                const x = -2e2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-200.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range without . and positive e: -2e+2"
              input: |
                const x = -2e+2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-200.0'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range with negative E: -1.2E-2"
              input: |
                const x = -1.2E-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-0.012'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range with negative E: -1.2e-2"
              input: |
                const x = -1.2e-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-0.012'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range starting with . and negative E: -.2E-2"
              input: |
                const x = -.2E-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-0.002'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range starting with . and negative E: -.2e-2"
              input: |
                const x = -.2e-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-0.002'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range without . and negative E: -2E-2"
              input: |
                const x = -2E-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat: '-0.02'
                  s:
                    EmptyStatement: {}
            - name: "negative float in range without . and negative e: -2e-2"
              input: |
                const x = -2e-2;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralFloat:  '-0.02'
                  s:
                    EmptyStatement: {}
            - name: "negative float outside range: -1.0e100"
              input: |
                const x = -1.0e100;
              output:
                - LiteralFloatOverflowError:
                    text: '-1.0e100'
                    location: 10:1:11-17:1:18
      - scenario:
          name: Ternary
          tests:
            - name: "true ? 1 : 2"
              input: |
                fun main() {
                  const x = true ? 1 : 2;
                }
              output:
                Program:
                  d: []
                  s:
                    ConstantDeclarationStatement:
                      n: x
                      e:
                        TernaryExpression:
                          t: Int
                          e1:
                            LiteralBool: 'True'
                          e2:
                            LiteralInt: '1'
                          e3:
                            LiteralInt: '2'
            - name: "Ternary Expression Not Boolean: 1.0 ? 1 : 2"
              input: |
                fun main() {
                  const x = 1.0 ? 1 : 2;
                }
              output:
                - TernaryExpressionNotBooleanError:
                    boollocation: 25:2:13-27:2:15
                    location: 25:2:13-35:2:23
            - name: "Ternary Expression Results Incompatible: true ? 1 : 2.0"
              input: |
                fun main() {
                  const x = true ? 1 : 2.0;
                }
              output:
                - TernaryExpressionResultIncompatibleError:
                    thenlocation: "32:2:20"
                    elselocation: 36:2:24-38:2:26
      - scenario:
          name: Binary
          tests:
            - scenario:
                name: Boolean operators
                tests:
                  - scenario:
                      name: "&&"
                      tests:
                        - name: "true && true"
                          input: |
                            fun main() {
                              const x = true && true;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: And
                                      e1:
                                        LiteralBool: 'True'
                                      e2:
                                        LiteralBool: 'True'
                        - name: "1 && true"
                          input: |
                            fun main() {
                              const x = 1 && true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: And
                                type: Int
                                location: "25:2:13"
                        - name: "true && 1"
                          input: |
                            fun main() {
                              const x = true && 1;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: And
                                type: Int
                                location: "33:2:21"
                        - name: "1.0 && 1"
                          input: |
                            fun main() {
                              const x = 1.0 && 1;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: And
                                type: Float
                                location: 25:2:13-27:2:15
                            - BinaryExpressionRequiresOperandTypeError:
                                op: And
                                type: Int
                                location: "32:2:20"
                  - scenario:
                      name: "||"
                      tests:
                        - name: "true || true"
                          input: |
                            fun main() {
                              const x = true || true;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: Or
                                      e1:
                                        LiteralBool: 'True'
                                      e2:
                                        LiteralBool: 'True'
                        - name: "1 || true"
                          input: |
                            fun main() {
                              const x = 1 || true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Or
                                type: Int
                                location: "25:2:13"
                        - name: "true || 1"
                          input: |
                            fun main() {
                              const x = true || 1;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Or
                                type: Int
                                location: "33:2:21"
                        - name: "1.0 || 1"
                          input: |
                            fun main() {
                              const x = 1.0 || 1;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Or
                                type: Float
                                location: 25:2:13-27:2:15
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Or
                                type: Int
                                location: "32:2:20"
            - scenario:
                name: Equality operators
                tests:
                  - scenario:
                      name: "=="
                      tests:
                        - name: "true == true"
                          input: |
                            fun main() {
                              const x = true == true;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: Equal
                                      e1:
                                        LiteralBool: 'True'
                                      e2:
                                        LiteralBool: 'True'
                        - name: "3 == 1"
                          input: |
                            fun main() {
                              const x = 3 == 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: Equal
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 == 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 == 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: Equal
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 == true"
                          input: |
                            fun main() {
                              const x = 1 == true;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Equal
                                location1: "25:2:13"
                                type1: Int
                                location2: 30:2:18-33:2:21
                                type2: Bool
                        - name: "true == 1"
                          input: |
                            fun main() {
                              const x = true == 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Equal
                                location1: 25:2:13-28:2:16
                                type1: Bool
                                location2: "33:2:21"
                                type2: Int
                  - scenario:
                      name: "!="
                      tests:
                        - name: "true != true"
                          input: |
                            fun main() {
                              const x = true != true;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: NotEqual
                                      e1:
                                        LiteralBool: 'True'
                                      e2:
                                        LiteralBool: 'True'
                        - name: "3 != 1"
                          input: |
                            fun main() {
                              const x = 3 != 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: NotEqual
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 != 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 != 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: NotEqual
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 != true"
                          input: |
                            fun main() {
                              const x = 1 != true;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: NotEqual
                                location1: "25:2:13"
                                type1: Int
                                location2: 30:2:18-33:2:21
                                type2: Bool
                        - name: "true != 1"
                          input: |
                            fun main() {
                              const x = true != 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: NotEqual
                                location1: 25:2:13-28:2:16
                                type1: Bool
                                location2: "33:2:21"
                                type2: Int
            - scenario:
                name: Relational operators
                tests:
                  - scenario:
                      name: "<"
                      tests:
                        - name: "true < true"
                          input: |
                            fun main() {
                              const x = true < true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: LessThan
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: LessThan
                                type: Bool
                                location: 32:2:20-35:2:23
                        - name: "3 < 1"
                          input: |
                            fun main() {
                              const x = 3 < 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: LessThan
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 < 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 < 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: LessThan
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 < true"
                          input: |
                            fun main() {
                              const x = 1 < true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: LessThan
                                type: Bool
                                location: 29:2:17-32:2:20
                            - BinaryExpressionOperandsIncompatibleError:
                                op: LessThan
                                location1: "25:2:13"
                                type1: Int
                                location2: 29:2:17-32:2:20
                                type2: Bool
                        - name: "true < 1"
                          input: |
                            fun main() {
                              const x = 1.0 < 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: LessThan
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "31:2:19"
                                type2: Int
                  - scenario:
                      name: "<="
                      tests:
                        - name: "true <= true"
                          input: |
                            fun main() {
                              const x = true <= true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: LessEqual
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: LessEqual
                                type: Bool
                                location: 33:2:21-36:2:24
                        - name: "3 <= 1"
                          input: |
                            fun main() {
                              const x = 3 <= 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: LessEqual
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 <= 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 <= 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: LessEqual
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 <= true"
                          input: |
                            fun main() {
                              const x = 1 <= true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: LessEqual
                                type: Bool
                                location: 30:2:18-33:2:21
                            - BinaryExpressionOperandsIncompatibleError:
                                op: LessEqual
                                location1: "25:2:13"
                                type1: Int
                                location2: 30:2:18-33:2:21
                                type2: Bool
                        - name: "true <= 1"
                          input: |
                            fun main() {
                              const x = 1.0 <= 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: LessEqual
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "32:2:20"
                                type2: Int
                  - scenario:
                      name: ">"
                      tests:
                        - name: "true > true"
                          input: |
                            fun main() {
                              const x = true > true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: GreaterThan
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: GreaterThan
                                type: Bool
                                location: 32:2:20-35:2:23
                        - name: "3 > 1"
                          input: |
                            fun main() {
                              const x = 3 > 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: GreaterThan
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 > 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 > 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: GreaterThan
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 > true"
                          input: |
                            fun main() {
                              const x = 1 > true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: GreaterThan
                                type: Bool
                                location: 29:2:17-32:2:20
                            - BinaryExpressionOperandsIncompatibleError:
                                op: GreaterThan
                                location1: "25:2:13"
                                type1: Int
                                location2: 29:2:17-32:2:20
                                type2: Bool
                        - name: "1.0 > 1"
                          input: |
                            fun main() {
                              const x = 1.0 > 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: GreaterThan
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "31:2:19"
                                type2: Int
                  - scenario:
                      name: ">="
                      tests:
                        - name: "true >= true"
                          input: |
                            fun main() {
                              const x = true >= true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: GreaterEqual
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: GreaterEqual
                                type: Bool
                                location: 33:2:21-36:2:24
                        - name: "3 >= 1"
                          input: |
                            fun main() {
                              const x = 3 >= 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: GreaterEqual
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 >= 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 >= 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Bool
                                      op: GreaterEqual
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 >= true"
                          input: |
                            fun main() {
                              const x = 1 >= true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: GreaterEqual
                                type: Bool
                                location: 30:2:18-33:2:21
                            - BinaryExpressionOperandsIncompatibleError:
                                op: GreaterEqual
                                location1: "25:2:13"
                                type1: Int
                                location2: 30:2:18-33:2:21
                                type2: Bool
                        - name: "1.0 >= 1"
                          input: |
                            fun main() {
                              const x = 1.0 >= 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: GreaterEqual
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "32:2:20"
                                type2: Int
            - scenario:
                name: Arithmatic operators
                tests:
                  - scenario:
                      name: "+"
                      tests:
                        - name: "true + true"
                          input: |
                            fun main() {
                              const x = true + true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Plus
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Plus
                                type: Bool
                                location: 32:2:20-35:2:23
                        - name: "3 + 1"
                          input: |
                            fun main() {
                              const x = 3 + 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Int
                                      op: Plus
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 + 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 + 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Float
                                      op: Plus
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 + true"
                          input: |
                            fun main() {
                              const x = 1 + true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Plus
                                type: Bool
                                location: 29:2:17-32:2:20
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Plus
                                location1: "25:2:13"
                                type1: Int
                                location2: 29:2:17-32:2:20
                                type2: Bool
                        - name: "1.0 + 1"
                          input: |
                            fun main() {
                              const x = 1.0 + 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Plus
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "31:2:19"
                                type2: Int
                  - scenario:
                      name: "-"
                      tests:
                        - name: "true - true"
                          input: |
                            fun main() {
                              const x = true - true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Minus
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Minus
                                type: Bool
                                location: 32:2:20-35:2:23
                        - name: "3 - 1"
                          input: |
                            fun main() {
                              const x = 3 - 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Int
                                      op: Minus
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 - 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 - 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Float
                                      op: Minus
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 - true"
                          input: |
                            fun main() {
                              const x = 1 - true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Minus
                                type: Bool
                                location: 29:2:17-32:2:20
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Minus
                                location1: "25:2:13"
                                type1: Int
                                location2: 29:2:17-32:2:20
                                type2: Bool
                        - name: "1.0 - 1"
                          input: |
                            fun main() {
                              const x = 1.0 - 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Minus
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "31:2:19"
                                type2: Int
                  - scenario:
                      name: "*"
                      tests:
                        - name: "true * true"
                          input: |
                            fun main() {
                              const x = true * true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Times
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Times
                                type: Bool
                                location: 32:2:20-35:2:23
                        - name: "3 * 1"
                          input: |
                            fun main() {
                              const x = 3 * 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Int
                                      op: Times
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 * 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 * 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Float
                                      op: Times
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 * true"
                          input: |
                            fun main() {
                              const x = 1 * true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Times
                                type: Bool
                                location: 29:2:17-32:2:20
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Times
                                location1: "25:2:13"
                                type1: Int
                                location2: 29:2:17-32:2:20
                                type2: Bool
                        - name: "1.0 * 1"
                          input: |
                            fun main() {
                              const x = 1.0 * 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Times
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "31:2:19"
                                type2: Int
                  - scenario:
                      name: "/"
                      tests:
                        - name: "true / true"
                          input: |
                            fun main() {
                              const x = true / true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Divide
                                type: Bool
                                location: 25:2:13-28:2:16
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Divide
                                type: Bool
                                location: 32:2:20-35:2:23
                        - name: "3 / 1"
                          input: |
                            fun main() {
                              const x = 3 / 1;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Int
                                      op: Divide
                                      e1:
                                        LiteralInt: '3'
                                      e2:
                                        LiteralInt: '1'
                        - name: "1.234 / 43.2"
                          input: |
                            fun main() {
                              const x = 1.234 / 43.2;
                            }
                          output:
                            Program:
                              d: []
                              s:
                                ConstantDeclarationStatement:
                                  n: x
                                  e:
                                    BinaryExpression:
                                      t: Float
                                      op: Divide
                                      e1:
                                        LiteralFloat: '1.234'
                                      e2:
                                        LiteralFloat: '43.2'
                        - name: "1 / true"
                          input: |
                            fun main() {
                              const x = 1 / true;
                            }
                          output:
                            - BinaryExpressionRequiresOperandTypeError:
                                op: Divide
                                type: Bool
                                location: 29:2:17-32:2:20
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Divide
                                location1: "25:2:13"
                                type1: Int
                                location2: 29:2:17-32:2:20
                                type2: Bool
                        - name: "1.0 / 1"
                          input: |
                            fun main() {
                              const x = 1.0 / 1;
                            }
                          output:
                            - BinaryExpressionOperandsIncompatibleError:
                                op: Divide
                                location1: 25:2:13-27:2:15
                                type1: Float
                                location2: "31:2:19"
                                type2: Int
      - scenario:
          name: Unary
          tests:
            - scenario:
                name: "-"
                tests:
                  - name: "-(1+1)"
                    input: |
                      fun main() {
                        const x = -(1+1);
                      }
                    output:
                      Program:
                        d: []
                        s:
                          ConstantDeclarationStatement:
                            n: x
                            e:
                              UnaryExpression:
                                t: Int
                                op: UnaryMinus
                                e:
                                  BinaryExpression:
                                    t: Int
                                    op: Plus
                                    e1:
                                      LiteralInt: '1'
                                    e2:
                                      LiteralInt: '1'
                  - name: "-(1.0+1.0)"
                    input: |
                      fun main() {
                        const x = -(1.0+1.0);
                      }
                    output:
                      Program:
                        d: []
                        s:
                          ConstantDeclarationStatement:
                            n: x
                            e:
                              UnaryExpression:
                                t: Float
                                op: UnaryMinus
                                e:
                                  BinaryExpression:
                                    t: Float
                                    op: Plus
                                    e1:
                                      LiteralFloat: '1.0'
                                    e2:
                                      LiteralFloat: '1.0'
                  - name: "-true"
                    input: |
                      fun main() {
                        const x = -true;
                      }
                    output:
                      - UnaryExpressionRequiresOperandTypeError:
                          op: UnaryMinus
                          type: Bool
                          location: 26:2:14-29:2:17
            - scenario:
                name: "+"
                tests:
                  - name: "+(1+1)"
                    input: |
                      fun main() {
                        const x = +(1+1);
                      }
                    output:
                      Program:
                        d: []
                        s:
                          ConstantDeclarationStatement:
                            n: x
                            e:
                              UnaryExpression:
                                t: Int
                                op: UnaryPlus
                                e:
                                  BinaryExpression:
                                    t: Int
                                    op: Plus
                                    e1:
                                      LiteralInt: '1'
                                    e2:
                                      LiteralInt: '1'
                  - name: "+(1.0+1.0)"
                    input: |
                      fun main() {
                        const x = +(1.0+1.0);
                      }
                    output:
                      Program:
                        d: []
                        s:
                          ConstantDeclarationStatement:
                            n: x
                            e:
                              UnaryExpression:
                                t: Float
                                op: UnaryPlus
                                e:
                                  BinaryExpression:
                                    t: Float
                                    op: Plus
                                    e1:
                                      LiteralFloat: '1.0'
                                    e2:
                                      LiteralFloat: '1.0'
                  - name: "+true"
                    input: |
                      fun main() {
                        const x = +true;
                      }
                    output:
                      - UnaryExpressionRequiresOperandTypeError:
                          op: UnaryPlus
                          type: Bool
                          location: 26:2:14-29:2:17
            - scenario:
                name: "!"
                tests:
                  - name: "!1"
                    input: |
                      fun main() {
                        const x = !1;
                      }
                    output:
                      - UnaryExpressionRequiresOperandTypeError:
                          op: UnaryNot
                          type: Int
                          location: "26:2:14"
                  - name: "!1.0"
                    input: |
                      fun main() {
                        const x = !1.0;
                      }
                    output:
                      - UnaryExpressionRequiresOperandTypeError:
                          op: UnaryNot
                          type: Float
                          location: 26:2:14-28:2:16
                  - name: "!true"
                    input: |
                      fun main() {
                        const x = !true;
                      }
                    output:
                      Program:
                        d: []
                        s:
                          ConstantDeclarationStatement:
                            n: x
                            e:
                              UnaryExpression:
                                t: Bool
                                op: UnaryNot
                                e:
                                  LiteralBool: 'True'
      - scenario:
          name: Identifier Reference
          tests:
            - name: Reference global Int constant as Int
              input: |
                const value = 1;

                fun main() {
                  const x = value + 2;
                }
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: value
                        e:
                          LiteralInt: '1'
                  s:
                    ConstantDeclarationStatement:
                      n: x
                      e:
                        BinaryExpression:
                          t: Int
                          op: Plus
                          e1:
                            IdentifierReference:
                              n: value
                              t: Int
                          e2:
                            LiteralInt: '2'
            - name: Reference global Float constant as Float
              input: |
                const value = 1.0;

                fun main() {
                  const x = value + 2.1;
                }
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: value
                        e:
                          LiteralFloat: '1.0'
                  s:
                    ConstantDeclarationStatement:
                      n: x
                      e:
                        BinaryExpression:
                          t: Float
                          op: Plus
                          e1:
                            IdentifierReference:
                              n: value
                              t: Float
                          e2:
                            LiteralFloat: '2.1'
            - name: Reference global Bool constant as Bool
              input: |
                const value = false;

                fun main() {
                  const x = value && true;
                }
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: value
                        e:
                          LiteralBool: 'False'
                  s:
                    ConstantDeclarationStatement:
                      n: x
                      e:
                        BinaryExpression:
                          t: Bool
                          op: And
                          e1:
                            IdentifierReference:
                              n: value
                              t: Bool
                          e2:
                            LiteralBool: 'True'
            - name: Reference global Int variable as Int
              input: |
                let value = 1;

                fun main() {
                  const x = value + 2;
                }
              output:
                Program:
                  d:
                    - VariableDeclaration:
                        identifier: value
                        e:
                          LiteralInt: '1'
                  s:
                    ConstantDeclarationStatement:
                      n: x
                      e:
                        BinaryExpression:
                          t: Int
                          op: Plus
                          e1:
                            IdentifierReference:
                              n: value
                              t: Int
                          e2:
                            LiteralInt: '2'
            - name: Reference global Float variable as Float
              input: |
                let value = 1.0;

                fun main() {
                  const x = value + 2.1;
                }
              output:
                Program:
                  d:
                    - VariableDeclaration:
                        identifier: value
                        e:
                          LiteralFloat: '1.0'
                  s:
                    ConstantDeclarationStatement:
                      n: x
                      e:
                        BinaryExpression:
                          t: Float
                          op: Plus
                          e1:
                            IdentifierReference:
                              n: value
                              t: Float
                          e2:
                            LiteralFloat: '2.1'
            - name: Reference global Bool variable as Bool
              input: |
                let value = false;

                fun main() {
                  const x = value && true;
                }
              output:
                Program:
                  d:
                    - VariableDeclaration:
                        identifier: value
                        e:
                          LiteralBool: 'False'
                  s:
                    ConstantDeclarationStatement:
                      n: x
                      e:
                        BinaryExpression:
                          t: Bool
                          op: And
                          e1:
                            IdentifierReference:
                              n: value
                              t: Bool
                          e2:
                            LiteralBool: 'True'
            - name: Reference function as value
              input: |
                fun it() { }

                fun add() {
                  const x = it;
                }
              output:
                - UnableToReferenceFunctionError:
                    name: it
                    location: 38:4:13-39:4:14
            - name: Reference Int argument
              input: |
                fun add(a: Int) {
                  const x = a;
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: add
                        ps:
                          - n: a
                            t: Int
                        ss:
                          - ConstantDeclarationStatement:
                              n: x
                              e:
                                IdentifierReference:
                                  n: a
                                  t: Int
                  s:
                    EmptyStatement: {}
            - name: Reference Float argument
              input: |
                fun add(a: Float) {
                  const x = a;
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: add
                        ps:
                          - n: a
                            t: Float
                        ss:
                          - ConstantDeclarationStatement:
                              n: x
                              e:
                                IdentifierReference:
                                  n: a
                                  t: Float
                  s:
                    EmptyStatement: {}
            - name: Reference Bool argument
              input: |
                fun add(a: Bool) {
                  const x = a;
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: add
                        ps:
                          - n: a
                            t: Bool
                        ss:
                          - ConstantDeclarationStatement:
                              n: x
                              e:
                                IdentifierReference:
                                  n: a
                                  t: Bool
                  s:
                    EmptyStatement: {}
            - name: Reference Int constant in same lexical scope
              input: |
                fun main() {
                  const x = 1;
                  const y = x;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - ConstantDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '1'
                      - ConstantDeclarationStatement:
                          n: 'y'
                          e:
                            IdentifierReference:
                              n: x
                              t: Int
            - name: Reference Float constant in same lexical scope
              input: |
                fun main() {
                  const x = 1.2;
                  const y = x;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - ConstantDeclarationStatement:
                          n: x
                          e:
                            LiteralFloat: '1.2'
                      - ConstantDeclarationStatement:
                          n: 'y'
                          e:
                            IdentifierReference:
                              n: x
                              t: Float
            - name: Reference Bool constant in same lexical scope
              input: |
                fun main() {
                  const x = true;
                  const y = x;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - ConstantDeclarationStatement:
                          n: x
                          e:
                            LiteralBool: 'True'
                      - ConstantDeclarationStatement:
                          n: 'y'
                          e:
                            IdentifierReference:
                              n: x
                              t: Bool
            - name: Reference Int variable in same lexical scope
              input: |
                fun main() {
                  let x = 1;
                  const y = x;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '1'
                      - ConstantDeclarationStatement:
                          n: 'y'
                          e:
                            IdentifierReference:
                              n: x
                              t: Int
            - name: Reference Float variable in same lexical scope
              input: |
                fun main() {
                  let x = 1.2;
                  const y = x;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralFloat: '1.2'
                      - ConstantDeclarationStatement:
                          n: 'y'
                          e:
                            IdentifierReference:
                              n: x
                              t: Float
            - name: Reference Bool variable in same lexical scope
              input: |
                fun main() {
                  let x = true;
                  const y = x;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralBool: 'True'
                      - ConstantDeclarationStatement:
                          n: 'y'
                          e:
                            IdentifierReference:
                              n: x
                              t: Bool
            - name: Reference Int constant in outer lexical scope
              input: |
                fun main() {
                  const x = 1;

                  {
                    const y = x;
                  }
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - ConstantDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '1'
                      - BlockStatement:
                          - ConstantDeclarationStatement:
                              n: 'y'
                              e:
                                IdentifierReference:
                                  n: x
                                  t: Int
            - name: Reference Float constant in outer lexical scope
              input: |
                fun main() {
                  const x = 1.2;

                  {
                    const y = x;
                  }
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - ConstantDeclarationStatement:
                          n: x
                          e:
                            LiteralFloat: '1.2'
                      - BlockStatement:
                          - ConstantDeclarationStatement:
                              n: 'y'
                              e:
                                IdentifierReference:
                                  n: x
                                  t: Float
            - name: Reference Bool constant in outer lexical scope
              input: |
                fun main() {
                  const x = true;

                  {
                    const y = x;
                  }
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - ConstantDeclarationStatement:
                          n: x
                          e:
                            LiteralBool: 'True'
                      - BlockStatement:
                          - ConstantDeclarationStatement:
                              n: 'y'
                              e:
                                IdentifierReference:
                                  n: x
                                  t: Bool
            - name: Reference Int variable in outer lexical scope
              input: |
                fun main() {
                  let x = 1;

                  {
                    const y = x;
                  }
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '1'
                      - BlockStatement:
                          - ConstantDeclarationStatement:
                              n: 'y'
                              e:
                                IdentifierReference:
                                  n: x
                                  t: Int
            - name: Reference Float variable in outer lexical scope
              input: |
                fun main() {
                  let x = 1.2;

                  {
                    const y = x;
                  }
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralFloat: '1.2'
                      - BlockStatement:
                          - ConstantDeclarationStatement:
                              n: 'y'
                              e:
                                IdentifierReference:
                                  n: x
                                  t: Float
            - name: Reference Bool variable in outer lexical scope
              input: |
                fun main() {
                  let x = true;

                  {
                    const y = x;
                  }
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralBool: 'True'
                      - BlockStatement:
                          - ConstantDeclarationStatement:
                              n: 'y'
                              e:
                                IdentifierReference:
                                  n: x
                                  t: Bool
            - name: Reference unknown identifier
              input: |
                fun add(a: Int, b: Int) {
                  const x = y;
                }
              output:
                - UnknownIdentifierError:
                    name: 'y'
                    location: "38:2:13"
      - scenario:
          name: Call Expression
          tests:
            - name: Arguments lined up
              input: |
                fun funny(a: Int, b: Float, c: Bool): Int {
                  return a;
                }

                fun main() {
                  const r = funny(0, 1.0, true);
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: funny
                        ps:
                          - n: a
                            t: Int
                          - n: b
                            t: Float
                          - n: c
                            t: Bool
                        ss: []
                        e:
                          IdentifierReference:
                            n: a
                            t: Int
                  s:
                    ConstantDeclarationStatement:
                      n: r
                      e:
                        CallExpression:
                          t: Int
                          n: funny
                          args:
                            - LiteralInt: '0'
                            - LiteralFloat: '1.0'
                            - LiteralBool: 'True'
            - name: Arguments and parameter cardinality mismatch
              input: |
                fun add(a: Int, b: Int): Int {
                  return a + b;
                }

                fun main() {
                  const r = add(0);
                }
              output:
                - MismatchInNumberOfParametersError:
                    arguments: 1
                    parameters: 2
                    location: 75:6:13-77:6:15
            - name: Arguments and parameter type mismatch
              input: |
                fun add(a: Int, b: Int): Int {
                  return a + b;
                }

                fun main() {
                  const r = add(0, 1.1);
                }
              output:
                - IncompatibleArgumentTypeError:
                    argumentType: Float
                    parameterType: Int
                    location: 82:6:20-84:6:22
            - name: Result does not return Int, Float or Bool
              input: |
                fun add(a: Int, b: Int) {
                }

                fun main() {
                  const r = add(0, 1);
                }
              output:
                - UnableToCallUnitFunctionAsValueFunctionError:
                    name: add
                    location: 54:5:13-56:5:15
            - name: Unknown identifier
              input: |
                fun main() {
                  const r = add(0, 1);
                }
              output:
                - UnknownIdentifierError:
                    name: add
                    location: 25:2:13-27:2:15
            - name: Attempt to call a variable
              input: |
                let add = 10;

                fun main() {
                  const r = add(0, 1);
                }
              output:
                - UnableToCallVariableAsFunctionError:
                    name: add
                    location: 40:4:13-42:4:15
            - name: Attempt to call a constant
              input: |
                const add = 10;

                fun main() {
                  const r = add(0, 1);
                }
              output:
                - UnableToCallConstantAsFunctionError:
                    name: add
                    location: 42:4:13-44:4:15
- scenario:
    name: Statements
    tests:
      - scenario:
          name: Assignment
          tests:
            - name: Int variable
              input: |
                fun main() {
                  let x = 1;

                  x = 2;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '1'
                      - AssignmentStatement:
                          n: x
                          e:
                            LiteralInt: '2'
            - name: Float variable
              input: |
                fun main() {
                  let x = 1.2;

                  x = 3.4;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralFloat: '1.2'
                      - AssignmentStatement:
                          n: x
                          e:
                            LiteralFloat: '3.4'
            - name: Bool variable
              input: |
                fun main() {
                  let x = true;

                  x = false;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralBool: 'True'
                      - AssignmentStatement:
                          n: x
                          e:
                            LiteralBool: 'False'
            - name: Int constant
              input: |
                fun main() {
                  const x = 1;

                  x = 2;
                }
              output:
                - UnableToAssignToConstantError:
                    name: x
                    location: "31:4:3"
            - name: Float constant
              input: |
                fun main() {
                  const x = 1.0;

                  x = 2.0;
                }
              output:
                - UnableToAssignToConstantError:
                    name: x
                    location: "33:4:3"
            - name: Bool constant
              input: |
                fun main() {
                  const x = true;

                  x = false;
                }
              output:
                - UnableToAssignToConstantError:
                    name: x
                    location: "34:4:3"
            - name: Function
              input: |
                fun add(a: Int, b: Int): Int {
                  return a + b;
                }

                fun main() {
                  add = false;
                }
              output:
                - UnableToAssignToFunctionError:
                    name: add
                    location: 65:6:3-67:6:5
            - name: Incompatible type assignment
              input: |
                fun main() {
                  let x = true;

                  x = 1;
                }
              output:
                - UnableToAssignIncompatibleTypesError:
                    type: Bool
                    location: "32:4:3"
                    expressionType: Int
                    expressionLocation: "36:4:7"
            - name: Undefined variable
              input: |
                fun main() {
                  x = false;
                }
              output:
                - UnknownIdentifierError:
                    name: x
                    location: "15:2:3"
      - scenario:
          name: If Then Else
          tests:
            - name: If e Then
              input: |
                fun main() {
                  let x = 0;

                  if true
                    x = 1;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '0'
                      - IfThenElseStatement:
                          e:
                            LiteralBool: 'True'
                          s1:
                            AssignmentStatement:
                              n: x
                              e:
                                LiteralInt: '1'
            - name: If e Then Else
              input: |
                fun main() {
                  let x = 0;

                  if true
                    x = 1;
                  else
                    x = 3;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '0'
                      - IfThenElseStatement:
                          e:
                            LiteralBool: 'True'
                          s1:
                            AssignmentStatement:
                              n: x
                              e:
                                LiteralInt: '1'
                          s2:
                            AssignmentStatement:
                              n: x
                              e:
                                LiteralInt: '3'
            - name: If e Then guard not boolean
              input: |
                fun main() {
                  let x = 0;

                  if x
                    x = 1;
                }
              output:
                - IfGuardNotBooleanError:
                    type: Int
                    location: "32:4:6"
            - name: If e Then Else guard not boolean
              input: |
                fun main() {
                  let x = 0;

                  if x
                    x = 1;
                  else
                    x = 3;
                }
              output:
                - IfGuardNotBooleanError:
                    type: Int
                    location: "32:4:6"
      - scenario:
          name: While
          tests:
            - name: While statement
              input: |
                fun main() {
                  let x = 0;

                  while true
                    x = x + 1;
                }
              output:
                Program:
                  d: []
                  s:
                    BlockStatement:
                      - VariableDeclarationStatement:
                          n: x
                          e:
                            LiteralInt: '0'
                      - WhileStatement:
                          e:
                            LiteralBool: 'True'
                          s:
                            AssignmentStatement:
                              n: x
                              e:
                                BinaryExpression:
                                  t: Int
                                  op: Plus
                                  e1:
                                    IdentifierReference:
                                      n: x
                                      t: Int
                                  e2:
                                    LiteralInt: '1'
            - name: While guard not boolean
              input: |
                fun main() {
                  let x = 0;

                  while x {
                    x = x + 1;
                  }
                }
              output:
                - WhileGuardNotBooleanError:
                    type: Int
                    location: "35:4:9"
      - scenario:
          name: Call
          tests:
            - name: Unit function without any arguments
              input: |
                fun something() {
                  something();
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: something
                        ps: []
                        ss:
                          - CallStatement:
                              n: something
                              args: []
                  s:
                    EmptyStatement: {}
            - name: Unit function with arguments
              input: |
                fun something(a: Int, b: Float, c: Bool) {
                  something(1, 2.0, true);
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: something
                        ps:
                          - n: a
                            t: Int
                          - n: b
                            t: Float
                          - n: c
                            t: Bool
                        ss:
                          - CallStatement:
                              n: something
                              args:
                                - LiteralInt: '1'
                                - LiteralFloat: '2.0'
                                - LiteralBool: 'True'
                  s:
                    EmptyStatement: {}
            - name: Non-function with arguments
              input: |
                fun something(): Bool {
                  something();

                  return true;
                }
              output:
                - UnableToCallValueFunctionAsUnitFunctionError:
                    name: something
                    location: 26:2:3-34:2:11
            - name: Undefined function
              input: |
                fun something() {
                  somethingElse();
                }
              output:
                - UnknownIdentifierError:
                    name: somethingElse
                    location: 20:2:3-32:2:15
            - name: Mismatch in argument and parameter cardinality
              input: |
                fun something(a: Int) {
                  something(1, 2.0);
                }
              output:
                - MismatchInNumberOfParametersError:
                    arguments: 2
                    parameters: 1
                    location: 26:2:3-34:2:11
            - name: print
              input: |
                fun something(a: Int, b: Float, c: Bool) {
                  print("Hello: ", a, ", ", b, ", ", c);
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: something
                        ps:
                          - n: a
                            t: Int
                          - n: b
                            t: Float
                          - n: c
                            t: Bool
                        ss:
                          - CallStatement:
                              n: print
                              args:
                                - LiteralString: '"Hello: "'
                                - IdentifierReference:
                                    n: a
                                    t: Int
                                - LiteralString: '", "'
                                - IdentifierReference:
                                    n: b
                                    t: Float
                                - LiteralString: '", "'
                                - IdentifierReference:
                                    n: c
                                    t: Bool
                  s:
                    EmptyStatement: {}
            - name: println
              input: |
                fun something(a: Int, b: Float, c: Bool) {
                  println("Hello: ", a, ", ", b, ", ", c);
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: something
                        ps:
                          - n: a
                            t: Int
                          - n: b
                            t: Float
                          - n: c
                            t: Bool
                        ss:
                          - CallStatement:
                              n: println
                              args:
                                - LiteralString: '"Hello: "'
                                - IdentifierReference:
                                    n: a
                                    t: Int
                                - LiteralString: '", "'
                                - IdentifierReference:
                                    n: b
                                    t: Float
                                - LiteralString: '", "'
                                - IdentifierReference:
                                    n: c
                                    t: Bool
                  s:
                    EmptyStatement: {}
- scenario:
    name: Declarations
    tests:
      - scenario:
          name: Constant
          tests:
            - name: "unique declaration"
              input: |
                const x = true;
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: x
                        e:
                          LiteralBool: 'True'
                  s:
                    EmptyStatement: {}
            - name: "duplicate declaration - const const"
              input: |
                const x = true;

                const x = true;
              output:
                - AttemptToRedefineDeclarationError:
                    name: x
                    location: "23:3:7"
            - name: "duplicate declaration - let const"
              input: |
                let x = true;

                const x = true;
              output:
                - AttemptToRedefineDeclarationError:
                    name: x
                    location: "21:3:7"
      - scenario:
          name: Variable
          tests:
            - name: "unique declaration"
              input: |
                let x = true;
              output:
                Program:
                  d:
                    - VariableDeclaration:
                        identifier: x
                        e:
                          LiteralBool: 'True'
                  s:
                    EmptyStatement: {}
            - name: "duplicate declaration - let let"
              input: |
                let x = true;

                let x = true;
              output:
                - AttemptToRedefineDeclarationError:
                    name: x
                    location: "19:3:5"
            - name: "duplicate declaration - const let"
              input: |
                const x = true;

                let x = true;
              output:
                - AttemptToRedefineDeclarationError:
                    name: x
                    location: "21:3:5"
      - scenario:
          name: Function
          tests:
            - name: "unique declaration"
              input: |
                fun main() {}
              output:
                Program:
                  d: []
                  s:
                    BlockStatement: []
            - name: "duplicate declaration - fun fun"
              input: |
                fun fred() {}

                fun fred() {}
              output:
                - AttemptToRedefineDeclarationError:
                    name: fred
                    location: 19:3:5-22:3:8
            - name: "duplicate declaration - let fun"
              input: |
                let fred = 1.0;

                fun fred() {}
              output:
                - AttemptToRedefineDeclarationError:
                    name: fred
                    location: 21:3:5-24:3:8
            - name: "duplicate declaration - const fun"
              input: |
                const fred = 1.0;

                fun fred() {}
              output:
                - AttemptToRedefineDeclarationError:
                    name: fred
                    location: 23:3:5-26:3:8
            - name: "duplicate argument name in function declaration"
              input: |
                fun fred(a: Int, b: Int, a: Float) {}
              output:
                - AttemptToRedefineDeclarationError:
                    name: a
                    location: "25:1:26"
            - name: "argument name in function declaration may override global declaration"
              input: |
                const a = 1.0;

                fun add(a: Int, b: Int) {}
              output:
                Program:
                  d:
                    - ConstantDeclaration:
                        identifier: a
                        e:
                          LiteralFloat: '1.0'
                    - FunctionDeclaration:
                        n: add
                        ps:
                          - n: a
                            t: Int
                          - n: b
                            t: Int
                        ss: []
                  s:
                    EmptyStatement: {}
            - name: "duplicate declaration of main"
              input: |
                fun main() {}

                fun main() {}
              output:
                - AttemptToRedefineDeclarationError:
                    name: main
                    location: 19:3:5-22:3:8
            - name: "declare value function called main"
              input: |
                fun main(): Int {
                  return 1;
                }
              output:
                - InvalidDeclarationOfMainError:
                    location: 4:1:5-7:1:8
            - name: "declare constant called main"
              input: |
                const main = 1;
              output:
                - InvalidDeclarationOfMainError:
                    location: 6:1:7-9:1:10
            - name: "declare variable called main"
              input: |
                let main = 1;
              output:
                - InvalidDeclarationOfMainError:
                    location: 4:1:5-7:1:8
            - name: "declare unit function called main with parameters"
              input: |
                fun main(a: Int) {
                }
              output:
                - InvalidDeclarationOfMainError:
                    location: 4:1:5-7:1:8
            - name: "functions are mutually recursive"
              input: |
                fun one() {
                  two();
                }

                fun two() {
                  one();
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: one
                        ps: []
                        ss:
                          - CallStatement:
                              n: two
                              args: []
                    - FunctionDeclaration:
                        n: two
                        ps: []
                        ss:
                          - CallStatement:
                              n: one
                              args: []
                  s:
                    EmptyStatement: {}
            - name: "main recursively calls itself"
              input: |
                fun main() {
                  main();
                }
              output:
                Program:
                  d: []
                  s:
                    CallStatement:
                      n: main
                      args: []
            - name: "function recursively calls main"
              input: |
                fun add() {
                  main();
                }

                fun main() {
                  main();
                }
              output:
                Program:
                  d:
                    - FunctionDeclaration:
                        n: add
                        ps: []
                        ss:
                          - CallStatement:
                              n: main
                              args: []
                  s:
                    CallStatement:
                      n: main
                      args: []

